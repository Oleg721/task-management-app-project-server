<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Test</title>
  <style type="text/css">
    span{
      margin: 0 1rem;
    }
  </style>

</head>
<body>
<h1>HELLO WORLD!!!!!!!!!!!!!!</h1>
<div style="padding: 1rem">
  <button id="addUserButton">add UserController</button>
    <label>name</label>
   <input type="text" placeholder="name" id="inputUserName">
  <label>nick</label>
   <input type="text" placeholder="Nickname" id="inputUserNickName">
</div>
<button id="getu">get all Users</button>
<div id="view">
  <ul id="viewUl"></ul>

</div>

</body>

<script>

  getu.addEventListener(`click`, async ()=>{
      let response = await fetch(`/users`);
      let data = await response.json();

      viewUl.innerHTML = data.map(value => {
          console.log(value)
         return `<li><span>ID - ${value.id}</span>
                     <span>Nickname - ${value.nickName}</span>
                      <span>Name - ${value.name}</span>
                      </li>`
      }).join(`\n`);
      history.pushState(null, null, '/users')
  })


  addUserButton.addEventListener(`click`,async ()=>{
      let response = await fetch('/add-user', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json;charset=utf-8'
          },
          body: JSON.stringify({name : inputUserName.value,
                                nickName : inputUserNickName.value})
      });

      console.log(await response.json())

      getu.click();

  })

</script>
</html>